<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Catálogo de DVDs</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --verde-ifmg: #009a44;
            --verde-escuro: #007236;
            --cinza-escuro: #333333;
            --cinza-medio: #666666;
            --cinza-claro: #f2f2f2;
            --branco: #ffffff;
            --azul: #0066cc;
            --amarelo: #ffcc00;
            --laranja: #ff9900;
            --vermelho: #cc0000;
            --preto: #000000;
            --sombra: 0 4px 6px rgba(0, 0, 0, 0.1);
            --transicao: all 0.3s ease;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--cinza-claro);
            color: var(--cinza-escuro);
            line-height: 1.6;
        }
        
        header {
            background-color: var(--verde-ifmg);
            color: var(--branco);
            padding: 25px 0;
            text-align: center;
            margin-bottom: 30px;
            box-shadow: var(--sombra);
            position: relative;
            overflow: hidden;
        }
        
        header::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(90deg, var(--verde-ifmg), var(--verde-escuro));
        }
        
        h1 {
            margin: 0;
            font-size: 2.5em;
            font-weight: 700;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        .controls {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 30px;
            align-items: flex-end;
            background: var(--branco);
            padding: 20px;
            border-radius: 8px;
            box-shadow: var(--sombra);
        }
        
        .search-box {
            flex: 1;
            min-width: 300px;
            position: relative;
        }
        
        .search-box input {
            width: 100%;
            padding: 12px 15px 12px 40px;
            border: 1px solid var(--cinza-medio);
            border-radius: 6px;
            font-size: 16px;
            transition: var(--transicao);
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.1);
        }
        
        .search-box input:focus {
            border-color: var(--verde-ifmg);
            outline: none;
            box-shadow: 0 0 0 3px rgba(0, 154, 68, 0.2);
        }
        
        .search-box i {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--cinza-medio);
        }
        
        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
            min-width: 200px;
        }
        
        .filter-group label {
            font-weight: bold;
            font-size: 14px;
            color: var(--cinza-escuro);
            margin-bottom: 4px;
        }
        
        select {
            padding: 12px;
            border: 1px solid var(--cinza-medio);
            border-radius: 6px;
            background-color: var(--branco);
            font-size: 14px;
            width: 100%;
            cursor: pointer;
            transition: var(--transicao);
            appearance: none;
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 10px center;
            background-size: 16px;
        }
        
        select:focus {
            border-color: var(--verde-ifmg);
            outline: none;
            box-shadow: 0 0 0 3px rgba(0, 154, 68, 0.2);
        }
        
        .items-per-page {
            display: flex;
            align-items: center;
            gap: 10px;
            white-space: nowrap;
        }
        
        .items-per-page span {
            font-size: 14px;
            font-weight: 600;
        }
        
        .items-per-page button {
            padding: 8px 12px;
            border: 1px solid var(--cinza-medio);
            border-radius: 6px;
            background-color: var(--branco);
            cursor: pointer;
            font-size: 14px;
            transition: var(--transicao);
            min-width: 40px;
        }
        
        .items-per-page button:hover {
            background-color: var(--cinza-claro);
        }
        
        .items-per-page button.active {
            background-color: var(--verde-ifmg);
            color: var(--branco);
            border-color: var(--verde-escuro);
        }

        /* CLASSIFICAÇÃO INDICATIVA - QUADRADOS COLORIDOS */
        .classification {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 24px;
            height: 24px;
            border-radius: 4px;
            font-weight: bold;
            font-size: 12px;
            margin-right: 10px;
            color: white;
            border: 1px solid rgba(0,0,0,0.1);
        }
        
        .classification.L { 
            background-color: var(--verde-ifmg);
        }
        
        .classification.ten { 
            background-color: var(--azul);
        }
        
        .classification.twelve { 
            background-color: var(--amarelo);
            color: var(--cinza-escuro);
        }
        
        .classification.fourteen { 
            background-color: var(--laranja);
        }
        
        .classification.sixteen { 
            background-color: var(--vermelho);
        }
        
        .classification.eighteen { 
            background-color: var(--preto);
        }

        .film-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .film-card {
            background-color: var(--branco);
            border-radius: 8px;
            overflow: hidden;
            box-shadow: var(--sombra);
            transition: var(--transicao);
            cursor: pointer;
            position: relative;
        }
        
        .film-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.15);
        }
        
        .film-poster {
            width: 100%;
            height: 350px;
            object-fit: cover;
            border-bottom: 3px solid var(--verde-ifmg);
            transition: var(--transicao);
        }
        
        .film-card:hover .film-poster {
            opacity: 0.9;
        }
        
        .film-info {
            padding: 15px;
        }
        
        .film-title {
            font-weight: bold;
            margin: 0 0 5px 0;
            color: var(--verde-escuro);
            font-size: 16px;
            line-height: 1.3;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            min-height: 2.6em;
        }
        
        .film-meta {
            display: flex;
            justify-content: space-between;
            font-size: 14px;
            color: var(--cinza-medio);
        }
        
        .film-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: rgba(0, 154, 68, 0.9);
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
            z-index: 1;
        }
        
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.8);
            overflow: auto;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .modal.show {
            opacity: 1;
        }
        
        .modal-content {
            background-color: var(--branco);
            margin: 5% auto;
            padding: 30px;
            width: 70%;
            max-width: 800px;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            position: relative;
            transform: translateY(-20px);
            transition: transform 0.3s ease;
        }
        
        .modal.show .modal-content {
            transform: translateY(0);
        }
        
        .close {
            position: absolute;
            top: 15px;
            right: 25px;
            font-size: 28px;
            font-weight: bold;
            color: var(--cinza-medio);
            cursor: pointer;
            transition: color 0.2s;
        }
        
        .close:hover {
            color: var(--verde-escuro);
        }
        
        .modal-poster {
            float: left;
            width: 200px;
            height: 280px;
            object-fit: cover;
            margin-right: 20px;
            margin-bottom: 20px;
            border: 3px solid var(--verde-ifmg);
            border-radius: 4px;
            box-shadow: var(--sombra);
        }
        
        .modal-title {
            color: var(--verde-escuro);
            margin-top: 0;
            border-bottom: 2px solid var(--cinza-claro);
            padding-bottom: 10px;
            margin-bottom: 15px;
            font-size: 24px;
        }
        
        .modal-details {
            margin-bottom: 20px;
        }
        
        .modal-details p {
            margin: 8px 0;
            font-size: 15px;
            line-height: 1.5;
        }
        
        .modal-details strong {
            color: var(--cinza-escuro);
        }
        
        .modal-synopsis {
            clear: both;
            line-height: 1.6;
        }
        
        .modal-synopsis h3 {
            color: var(--verde-escuro);
            margin-bottom: 10px;
        }
        
        .modal-synopsis p {
            font-size: 15px;
            line-height: 1.6;
        }
        
        .pagination {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        .pagination button {
            padding: 8px 12px;
            border: 1px solid var(--cinza-medio);
            border-radius: 4px;
            background-color: var(--branco);
            cursor: pointer;
            transition: var(--transicao);
            min-width: 40px;
        }
        
        .pagination button:hover {
            background-color: var(--cinza-claro);
        }
        
        .pagination button.active {
            background-color: var(--verde-ifmg);
            color: var(--branco);
            border-color: var(--verde-escuro);
        }
        
        .pagination span {
            padding: 8px 12px;
            display: flex;
            align-items: center;
        }
        
        footer {
            background-color: var(--verde-escuro);
            color: var(--branco);
            text-align: center;
            padding: 20px;
            margin-top: 30px;
            box-shadow: 0 -2px 5px rgba(0,0,0,0.1);
        }
        
        .loading {
            text-align: center;
            padding: 40px;
            font-size: 1.2em;
            color: var(--cinza-medio);
        }
        
        .skeleton {
            background-color: #e0e0e0;
            border-radius: 4px;
            overflow: hidden;
            position: relative;
        }
        
        .skeleton::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.5), transparent);
            animation: shimmer 1.5s infinite;
        }
        
        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        .no-results {
            grid-column: 1 / -1;
            text-align: center;
            padding: 40px;
            background: var(--branco);
            border-radius: 8px;
            box-shadow: var(--sombra);
        }
        
        .no-results i {
            font-size: 40px;
            color: var(--cinza-medio);
            margin-bottom: 15px;
        }
        
        .no-results p {
            margin: 0;
            font-size: 16px;
        }
        
        @media (max-width: 900px) {
            .controls {
                flex-direction: column;
                gap: 15px;
                align-items: stretch;
            }
            
            .search-box {
                min-width: 100%;
            }
            
            .filter-group {
                width: 100%;
            }
            
            .items-per-page {
                justify-content: flex-start;
            }
            
            .modal-content {
                width: 90%;
                padding: 20px;
            }
            
            .modal-poster {
                float: none;
                width: 100%;
                height: auto;
                max-height: 400px;
                margin-right: 0;
                margin-bottom: 15px;
            }
            
            .film-grid {
                grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
                gap: 20px;
            }
            
            .film-poster {
                height: 280px;
            }
        }
        
        @media (max-width: 600px) {
            h1 {
                font-size: 2em;
            }
            
            .film-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
                gap: 15px;
            }
            
            .film-poster {
                height: 220px;
            }
            
            .film-title {
                font-size: 14px;
            }
            
            .film-meta {
                font-size: 12px;
            }
            
            .pagination {
                gap: 5px;
            }
            
            .pagination button, 
            .pagination span {
                padding: 6px 8px;
                min-width: 30px;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1><i class="fas fa-film"></i> Catálogo de DVDs</h1>
        </div>
    </header>
    
    <div class="container">
        <div class="controls">
            <div class="search-box">
                <i class="fas fa-search"></i>
                <input type="text" id="searchInput" placeholder="Buscar filmes por título, diretor ou gênero...">
            </div>
            
            <div class="filter-group">
                <label for="genreFilter"><i class="fas fa-tags"></i> Gênero</label>
                <select id="genreFilter">
                    <option value="">Todos os gêneros</option>
                </select>
            </div>
            
            <div class="items-per-page">
                <span><i class="fas fa-list-ol"></i> Itens por página:</span>
                <button class="active" data-items="10">10</button>
                <button data-items="20">20</button>
                <button data-items="30">30</button>
            </div>
        </div>
        
        <div id="loadingMessage" class="loading">
            <div class="skeleton" style="width: 100%; height: 300px; margin-bottom: 20px;"></div>
            <div class="skeleton" style="width: 80%; height: 20px; margin: 0 auto 10px;"></div>
            <div class="skeleton" style="width: 60%; height: 20px; margin: 0 auto;"></div>
        </div>
        
        <div class="film-grid" id="filmGrid"></div>
        
        <div class="pagination" id="pagination"></div>
    </div>
    
    <div id="filmModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <div id="modalContent"></div>
        </div>
    </div>
    
    <footer>
        <div class="container">
            <p><i class="fas fa-train"></i> UM TREM DE CINEMA 2019-2021</p>
        </div>
    </footer>
    
    <script>
        // Variáveis globais
        let allFilms = [];
        let currentFilms = [];
        let currentPage = 1;
        let itemsPerPage = 10;
        let allGenres = [];
        let debounceTimer;
        
        // Função para limpar campos
        function cleanField(value) {
            if (!value) return '';
            return String(value).replace(/^"|"$/g, '').trim();
        }
        
        // Função para obter capa do DVD
        function getCoverForDvd(dvdTitle) {
            if (!dvdTitle) return 'capas/progbrasil.png';
            
            const normalizedName = dvdTitle
                .toLowerCase()
                .normalize('NFD').replace(/[\u0300-\u036f]/g, '')
                .replace(/\s+/g, '_')
                .replace(/[^\w_]/g, '');
                
            return `capas/${normalizedName}.png`;
        }
        
        // Classificação por cores - Retorna a classe CSS correspondente
        function getClassificationClass(age) {
            if (!age || age <= 0) return 'L';
            
            switch(age) {
                case 10: return 'ten';
                case 12: return 'twelve';
                case 14: return 'fourteen';
                case 16: return 'sixteen';
                case 18: return 'eighteen';
                default: return 'L';
            }
        }
        
        // Transformar dados do JSON
        function transformFilmData(originalFilm) {
            return {
                title: cleanField(originalFilm["Título do filme"]),
                director: cleanField(originalFilm["Direção"]),
                cast: cleanField(originalFilm["Elenco"]),
                duration: parseInt(originalFilm["Dur.(´)"]) || 0,
                genre: cleanField(originalFilm["GEN."]),
                year: parseInt(originalFilm["Ano"]) || 0,
                imdb: originalFilm["nota imdb"]?.votantes || '',
                state: cleanField(originalFilm["UF"]),
                synopsis: cleanField(originalFilm["Sinopse"]),
                dvd: cleanField(originalFilm["Nome do Programa"]),
                classification: parseInt(originalFilm["Classificação Indicativa POR PGM"]) || 0
            };
        }
        
        // Carregar dados do JSON com skeleton loading
        async function loadCatalogData() {
            try {
                // Simular delay para mostrar o skeleton loading
                await new Promise(resolve => setTimeout(resolve, 800));
                
                const response = await fetch('catalogo.json');
                if (!response.ok) throw new Error('Erro ao carregar o arquivo');
                
                const data = await response.json();
                allFilms = data.map(transformFilmData);
                
                // Extrair gêneros únicos
                allGenres = [...new Set(allFilms.map(film => film.genre).filter(Boolean))].sort();
                
                // Popular filtro de gêneros
                const genreFilter = document.getElementById('genreFilter');
                allGenres.forEach(genre => {
                    const option = document.createElement('option');
                    option.value = genre;
                    option.textContent = genre;
                    genreFilter.appendChild(option);
                });
                
                currentFilms = allFilms;
                document.getElementById('loadingMessage').style.display = 'none';
                renderFilms();
                
            } catch (error) {
                console.error('Erro:', error);
                document.getElementById('loadingMessage').innerHTML = `
                    <div style="color: var(--vermelho); text-align: center;">
                        <i class="fas fa-exclamation-triangle" style="font-size: 40px; margin-bottom: 15px;"></i>
                        <p style="font-weight: bold;">Erro ao carregar o catálogo</p>
                        <p>${error.message}</p>
                        <button onclick="loadCatalogData()" style="margin-top: 15px; padding: 8px 15px; background-color: var(--verde-ifmg); color: white; border: none; border-radius: 4px; cursor: pointer;">
                            <i class="fas fa-sync-alt"></i> Tentar novamente
                        </button>
                    </div>
                `;
            }
        }
        
        // Filtrar filmes com debounce para melhor performance
        function filterAndRenderFilms() {
            clearTimeout(debounceTimer);
            debounceTimer = setTimeout(() => {
                const searchTerm = document.getElementById('searchInput').value.toLowerCase();
                const genreFilter = document.getElementById('genreFilter').value;
                
                currentFilms = allFilms.filter(film => {
                    const matchesSearch = 
                        film.title.toLowerCase().includes(searchTerm) ||
                        (film.director && film.director.toLowerCase().includes(searchTerm)) ||
                        (film.genre && film.genre.toLowerCase().includes(searchTerm));
                    
                    const matchesGenre = genreFilter === '' || film.genre === genreFilter;
                    
                    return matchesSearch && matchesGenre;
                });
                
                currentPage = 1;
                renderPagination();
                renderFilms();
            }, 300);
        }
        
        // Renderizar filmes com skeleton loading
        function renderFilms() {
            const filmGrid = document.getElementById('filmGrid');
            filmGrid.innerHTML = '';
            
            const startIndex = (currentPage - 1) * itemsPerPage;
            const endIndex = startIndex + itemsPerPage;
            const filmsToShow = currentFilms.slice(startIndex, endIndex);
            
            if (filmsToShow.length === 0) {
                filmGrid.innerHTML = `
                    <div class="no-results">
                        <i class="fas fa-film"></i>
                        <p>Nenhum filme encontrado com os critérios selecionados.</p>
                        <button onclick="resetFilters()" style="margin-top: 15px; padding: 8px 15px; background-color: var(--verde-ifmg); color: white; border: none; border-radius: 4px; cursor: pointer;">
                            <i class="fas fa-undo"></i> Limpar filtros
                        </button>
                    </div>
                `;
                return;
            }
            
            filmsToShow.forEach(film => {
                const filmCard = document.createElement('div');
                filmCard.className = 'film-card';
                
                // Badge para DVD
                if (film.dvd) {
                    const dvdBadge = document.createElement('div');
                    dvdBadge.className = 'film-badge';
                    dvdBadge.textContent = film.dvd;
                    filmCard.appendChild(dvdBadge);
                }
                
                const posterImg = document.createElement('img');
                posterImg.className = 'film-poster';
                posterImg.alt = film.title;
                posterImg.src = getCoverForDvd(film.dvd);
                posterImg.loading = "lazy";
                posterImg.onerror = function() {
                    this.src = 'capas/progbrasil.png';
                };
                
                const filmInfo = document.createElement('div');
                filmInfo.className = 'film-info';
                
                const title = document.createElement('h3');
                title.className = 'film-title';
                title.textContent = film.title;
                
                const meta = document.createElement('div');
                meta.className = 'film-meta';
                
                const duration = document.createElement('span');
                duration.textContent = film.duration ? `${film.duration} min` : '';
                
                const year = document.createElement('span');
                year.textContent = film.year || '';
                
                meta.appendChild(duration);
                meta.appendChild(year);
                
                filmInfo.appendChild(title);
                filmInfo.appendChild(meta);
                
                filmCard.appendChild(posterImg);
                filmCard.appendChild(filmInfo);
                
                filmCard.addEventListener('click', () => openModal(film));
                filmGrid.appendChild(filmCard);
            });
        }
        
        // Resetar filtros
        function resetFilters() {
            document.getElementById('searchInput').value = '';
            document.getElementById('genreFilter').value = '';
            filterAndRenderFilms();
        }
        
        // Abrir modal com animação
        function openModal(film) {
            const modal = document.getElementById('filmModal');
            const modalContent = document.getElementById('modalContent');
            
            const classification = film.classification || 0;
            const classificationClass = getClassificationClass(classification);
            const classificationText = classification <= 0 ? 'L' : classification;
            
            modalContent.innerHTML = `
                <img src="${getCoverForDvd(film.dvd)}" alt="${film.title}" class="modal-poster" onerror="this.src='capas/progbrasil.png'">
                <h2 class="modal-title">
                    <span class="classification ${classificationClass}">${classificationText}</span>
                    ${film.title}
                </h2>
                <div class="modal-details">
                    ${film.director ? `<p><strong><i class="fas fa-user"></i> Direção:</strong> ${film.director}</p>` : ''}
                    ${film.cast ? `<p><strong><i class="fas fa-users"></i> Elenco:</strong> ${film.cast}</p>` : ''}
                    ${film.duration ? `<p><strong><i class="fas fa-clock"></i> Duração:</strong> ${film.duration} min</p>` : ''}
                    ${film.genre ? `<p><strong><i class="fas fa-tag"></i> Gênero:</strong> ${film.genre}</p>` : ''}
                    ${film.year ? `<p><strong><i class="fas fa-calendar-alt"></i> Ano:</strong> ${film.year}</p>` : ''}
                    ${film.imdb ? `<p><strong><i class="fab fa-imdb"></i> IMDb:</strong> ${film.imdb}</p>` : ''}
                    ${film.dvd ? `<p><strong><i class="fas fa-compact-disc"></i> DVD:</strong> ${film.dvd}</p>` : ''}
                </div>
                ${film.synopsis ? `
                <div class="modal-synopsis">
                    <h3><i class="fas fa-align-left"></i> Sinopse</h3>
                    <p>${film.synopsis}</p>
                </div>
                ` : ''}
            `;
            
            modal.style.display = 'block';
            setTimeout(() => {
                modal.classList.add('show');
            }, 10);
            
            // Adicionar evento de teclado para fechar com ESC
            document.addEventListener('keydown', handleKeyDown);
        }
        
        // Fechar modal
        function closeModal() {
            const modal = document.getElementById('filmModal');
            modal.classList.remove('show');
            
            setTimeout(() => {
                modal.style.display = 'none';
            }, 300);
            
            // Remover evento de teclado
            document.removeEventListener('keydown', handleKeyDown);
        }
        
        // Handler para tecla ESC
        function handleKeyDown(e) {
            if (e.key === 'Escape') {
                closeModal();
            }
        }
        
        // Paginação melhorada
        function renderPagination() {
            const pagination = document.getElementById('pagination');
            pagination.innerHTML = '';
            
            const totalPages = Math.ceil(currentFilms.length / itemsPerPage);
            if (totalPages <= 1) return;
            
            // Botão Anterior
            const prevButton = document.createElement('button');
            prevButton.innerHTML = '<i class="fas fa-chevron-left"></i> Anterior';
            prevButton.disabled = currentPage === 1;
            prevButton.addEventListener('click', () => {
                if (currentPage > 1) {
                    currentPage--;
                    renderFilms();
                    window.scrollTo({top: 0, behavior: 'smooth'});
                }
            });
            pagination.appendChild(prevButton);
            
            // Páginas
            const maxVisiblePages = 5;
            let startPage = Math.max(1, currentPage - Math.floor(maxVisiblePages / 2));
            let endPage = Math.min(totalPages, startPage + maxVisiblePages - 1);
            
            if (endPage - startPage + 1 < maxVisiblePages) {
                startPage = Math.max(1, endPage - maxVisiblePages + 1);
            }
            
            // Primeira página
            if (startPage > 1) {
                const firstButton = document.createElement('button');
                firstButton.textContent = '1';
                firstButton.addEventListener('click', () => {
                    currentPage = 1;
                    renderFilms();
                    window.scrollTo({top: 0, behavior: 'smooth'});
                });
                pagination.appendChild(firstButton);
                
                if (startPage > 2) {
                    const ellipsis = document.createElement('span');
                    ellipsis.textContent = '...';
                    pagination.appendChild(ellipsis);
                }
            }
            
            // Páginas intermediárias
            for (let i = startPage; i <= endPage; i++) {
                const pageButton = document.createElement('button');
                pageButton.textContent = i;
                if (i === currentPage) pageButton.classList.add('active');
                pageButton.addEventListener('click', () => {
                    currentPage = i;
                    renderFilms();
                    window.scrollTo({top: 0, behavior: 'smooth'});
                });
                pagination.appendChild(pageButton);
            }
            
            // Última página
            if (endPage < totalPages) {
                if (endPage < totalPages - 1) {
                    const ellipsis = document.createElement('span');
                    ellipsis.textContent = '...';
                    pagination.appendChild(ellipsis);
                }
                
                const lastButton = document.createElement('button');
                lastButton.textContent = totalPages;
                lastButton.addEventListener('click', () => {
                    currentPage = totalPages;
                    renderFilms();
                    window.scrollTo({top: 0, behavior: 'smooth'});
                });
                pagination.appendChild(lastButton);
            }
            
            // Botão Próximo
            const nextButton = document.createElement('button');
            nextButton.innerHTML = 'Próximo <i class="fas fa-chevron-right"></i>';
            nextButton.disabled = currentPage === totalPages;
            nextButton.addEventListener('click', () => {
                if (currentPage < totalPages) {
                    currentPage++;
                    renderFilms();
                    window.scrollTo({top: 0, behavior: 'smooth'});
                }
            });
            pagination.appendChild(nextButton);
        }
        
        // Configurar eventos
        function setupEventListeners() {
            document.getElementById('searchInput').addEventListener('input', filterAndRenderFilms);
            document.getElementById('genreFilter').addEventListener('change', filterAndRenderFilms);
            
            document.querySelectorAll('.items-per-page button').forEach(button => {
                button.addEventListener('click', function() {
                    document.querySelectorAll('.items-per-page button').forEach(btn => {
                        btn.classList.remove('active');
                    });
                    this.classList.add('active');
                    itemsPerPage = parseInt(this.dataset.items);
                    currentPage = 1;
                    filterAndRenderFilms();
                    window.scrollTo({top: 0, behavior: 'smooth'});
                });
            });
            
            document.querySelector('.close').addEventListener('click', closeModal);
            
            window.addEventListener('click', function(event) {
                if (event.target === document.getElementById('filmModal')) {
                    closeModal();
                }
            });
        }
        
        // Inicialização
        window.addEventListener('DOMContentLoaded', function() {
            setupEventListeners();
            loadCatalogData();
        });
    </script>
</body>
</html>

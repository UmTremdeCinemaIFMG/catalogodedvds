<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Catálogo de DVDs</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --verde-ifmg: #009a44;
            --verde-escuro: #007236;
            --cinza-escuro: #333333;
            --cinza-medio: #666666;
            --cinza-claro: #f2f2f2;
            --branco: #ffffff;
            --azul: #0066cc;
            --amarelo: #ffcc00;
            --laranja: #ff9900;
            --vermelho: #cc0000;
            --preto: #000000;
            --sombra: 0 4px 6px rgba(0, 0, 0, 0.1);
            --transicao: all 0.3s ease;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--cinza-claro);
            color: var(--cinza-escuro);
            line-height: 1.6;
        }
        
        header {
            background-color: var(--verde-ifmg);
            color: var(--branco);
            padding: 25px 0;
            text-align: center;
            margin-bottom: 30px;
            box-shadow: var(--sombra);
            position: relative;
            overflow: hidden;
            transition: var(--transicao);
            cursor: pointer;
        }
        
        header::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(90deg, var(--verde-ifmg), var(--verde-escuro));
        }
        
        header:hover {
            background-color: var(--vermelho);
            transform: scale(1.01);
        }
        
        h1 {
            margin: 0;
            font-size: 2.5em;
            font-weight: 700;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
            transition: var(--transicao);
        }
        
        header:hover h1 {
            transform: scale(1.02);
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        .controls-row {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .search-container {
            flex: 1;
            min-width: 300px;
        }
        
        .search-box {
            position: relative;
        }
        
        .search-box input {
            width: 100%;
            padding: 12px 15px 12px 40px;
            border: 1px solid var(--cinza-medio);
            border-radius: 6px;
            font-size: 16px;
            transition: var(--transicao);
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.1);
        }
        
        .search-box input:focus {
            border-color: var(--verde-ifmg);
            outline: none;
            box-shadow: 0 0 0 3px rgba(0, 154, 68, 0.2);
        }
        
        .search-box i {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--cinza-medio);
        }
        
        .genre-filter-container {
            background-color: var(--branco);
            padding: 15px;
            border-radius: 8px;
            box-shadow: var(--sombra);
            margin-bottom: 30px;
        }
        
        .genre-filter-title {
            font-weight: bold;
            font-size: 16px;
            color: var(--cinza-escuro);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .genre-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }
        
        .genre-tag {
            display: inline-block;
            padding: 6px 12px;
            background-color: var(--cinza-claro);
            color: var(--cinza-escuro);
            border-radius: 20px;
            font-size: 14px;
            cursor: pointer;
            transition: var(--transicao);
            border: 1px solid var(--cinza-medio);
        }
        
        .genre-tag:hover {
            background-color: var(--verde-ifmg);
            color: var(--branco);
            border-color: var(--verde-escuro);
        }
        
        .genre-tag.active {
            background-color: var(--verde-ifmg);
            color: var(--branco);
            border-color: var(--verde-escuro);
            font-weight: bold;
        }

        .sort-container {
            flex: 1;
            min-width: 250px;
        }

        .sort-box {
            display: flex;
            align-items: center;
            background-color: var(--branco);
            padding: 12px 15px;
            border-radius: 6px;
            box-shadow: var(--sombra);
        }

        .sort-box i {
            color: var(--cinza-medio);
            margin-right: 10px;
        }

        .sort-box select {
            border: none;
            background: transparent;
            font-size: 16px;
            flex: 1;
            cursor: pointer;
            color: var(--cinza-escuro);
            outline: none;
        }

        .results-counter {
            background-color: var(--branco);
            padding: 12px 15px;
            border-radius: 6px;
            box-shadow: var(--sombra);
            font-size: 16px;
        }

        .results-counter span {
            font-weight: bold;
            color: var(--verde-ifmg);
        }
        
        .classification {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 24px;
            height: 24px;
            border-radius: 4px;
            font-weight: bold;
            font-size: 12px;
            margin-right: 10px;
            color: white;
            border: 1px solid rgba(0,0,0,0.1);
        }
        
        .classification.L { 
            background-color: var(--verde-ifmg);
        }
        
        .classification.ten { 
            background-color: var(--azul);
        }
        
        .classification.twelve { 
            background-color: var(--amarelo);
            color: var(--cinza-escuro);
        }
        
        .classification.fourteen { 
            background-color: var(--laranja);
        }
        
        .classification.sixteen { 
            background-color: var(--vermelho);
        }
        
        .classification.eighteen { 
            background-color: var(--preto);
        }

        .film-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .film-card {
            background-color: var(--branco);
            border-radius: 8px;
            overflow: hidden;
            box-shadow: var(--sombra);
            transition: var(--transicao);
            cursor: pointer;
            position: relative;
        }
        
        .film-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.15);
        }
        
        .film-poster-container {
            width: 100%;
            height: 350px;
            position: relative;
            overflow: hidden;
            border-bottom: 3px solid var(--verde-ifmg);
        }
        
        .film-poster {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }
        
        .film-info {
            padding: 15px;
        }
        
        .film-title {
            font-weight: bold;
            margin: 0 0 5px 0;
            color: var(--verde-escuro);
            font-size: 16px;
            line-height: 1.3;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            min-height: 2.6em;
        }
        
        .film-meta {
            display: flex;
            justify-content: space-between;
            font-size: 14px;
            color: var(--cinza-medio);
        }
        
        .film-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: transparent;
            padding: 0;
            z-index: 1;
        }
        
        .pagination {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        .pagination button {
            padding: 8px 12px;
            border: 1px solid var(--cinza-medio);
            border-radius: 4px;
            background-color: var(--branco);
            cursor: pointer;
            transition: var(--transicao);
            min-width: 40px;
        }
        
        .pagination button:hover {
            background-color: var(--cinza-claro);
        }
        
        .pagination button.active {
            background-color: var(--verde-ifmg);
            color: var(--branco);
            border-color: var(--verde-escuro);
        }
        
        .pagination span {
            padding: 8px 12px;
            display: flex;
            align-items: center;
        }
        
        .loading {
            text-align: center;
            padding: 40px;
            font-size: 1.2em;
            color: var(--cinza-medio);
        }
        
        .no-results {
            grid-column: 1 / -1;
            text-align: center;
            padding: 40px;
            background: var(--branco);
            border-radius: 8px;
            box-shadow: var(--sombra);
        }
        
        .no-results i {
            font-size: 40px;
            color: var(--cinza-medio);
            margin-bottom: 15px;
        }
        
        .no-results p {
            margin: 0;
            font-size: 16px;
        }
        
        footer {
            background-color: var(--verde-escuro);
            color: var(--branco);
            text-align: center;
            padding: 20px;
            margin-top: 30px;
            box-shadow: 0 -2px 5px rgba(0,0,0,0.1);
            transition: var(--transicao);
            cursor: pointer;
        }

        footer:hover {
            background-color: var(--vermelho);
            transform: scale(1.01);
        }

        footer p {
            margin: 0;
            transition: var(--transicao);
        }

        footer:hover p {
            transform: scale(1.02);
        }

        @media (max-width: 900px) {
            .film-grid {
                grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
                gap: 20px;
            }
            
            .film-poster-container {
                height: 280px;
            }
        }
        
        @media (max-width: 600px) {
            h1 {
                font-size: 2em;
            }
            
            .film-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
                gap: 15px;
            }
            
            .film-poster-container {
                height: 220px;
            }
            
            .film-title {
                font-size: 14px;
            }
            
            .film-meta {
                font-size: 12px;
            }
            
            .pagination {
                gap: 5px;
            }
            
            .pagination button, 
            .pagination span {
                padding: 6px 8px;
                min-width: 30px;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1><i class="fas fa-film"></i> Catálogo de DVDs</h1>
        </div>
    </header>
    
    <div class="container">
        <!-- Barra de busca -->
        <div class="controls-row">
            <div class="search-container">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" id="searchInput" placeholder="Buscar filmes por título, diretor...">
                </div>
            </div>
        </div>
        
        <!-- Filtro de gêneros -->
        <div class="genre-filter-container">
            <div class="genre-filter-title">
                <i class="fas fa-filter"></i> Filtrar por gênero:
            </div>
            <div class="genre-tags" id="genreTags">
                <div class="genre-tag active" data-genre="">Todos</div>
                <!-- Tags de gênero serão adicionadas dinamicamente aqui -->
            </div>
        </div>
        
        <!-- Ordenação e contagem -->
        <div class="controls-row">
            <div class="sort-container">
                <div class="sort-box">
                    <i class="fas fa-sort-alpha-down"></i>
                    <select id="sortSelect">
                        <option value="">Ordenar por...</option>
                        <option value="asc">Título (A-Z)</option>
                        <option value="desc">Título (Z-A)</option>
                    </select>
                </div>
            </div>
            
            <div class="results-counter">
                <span id="resultsCount">0</span> filmes encontrados
            </div>
        </div>
        
        <!-- Mensagem de carregamento -->
        <div id="loadingMessage" class="loading">
            <div class="skeleton" style="width: 100%; height: 300px; margin-bottom: 20px;"></div>
            <div class="skeleton" style="width: 80%; height: 20px; margin: 0 auto 10px;"></div>
            <div class="skeleton" style="width: 60%; height: 20px; margin: 0 auto;"></div>
        </div>
        
        <!-- Grid de filmes -->
        <div class="film-grid" id="filmGrid"></div>
        
        <!-- Paginação -->
        <div class="pagination" id="pagination"></div>
    </div>
    
    <!-- Modal -->
    <div id="filmModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <div id="modalContent"></div>
        </div>
    </div>

    <!-- Rodapé -->
    <footer>
        <div class="container">
            <p><i class="fas fa-train"></i> UM TREM DE CINEMA 2019-2021</p>
        </div>
    </footer>
        
    <script>
        // Variáveis globais
        let allFilms = [];
        let currentFilms = [];
        let currentPage = 1;
        const itemsPerPage = 20;
        let allGenres = [];
        let selectedGenre = '';
        let currentSort = '';
        let debounceTimer;
        
        // Função para limpar campos
        function cleanField(value) {
            if (!value) return '';
            return String(value).replace(/^"|"$/g, '').trim();
        }
        
        // Obter capa do DVD
        function getDvdCover(film) {
            if (!film.imageName) return 'capas/progbrasil.png';
            
            // Tenta com .jpg primeiro
            const baseName = film.imageName.replace(/\.(jpg|jpeg|png)$/i, '');
            const jpgPath = `capas/${baseName}.jpg`;
            return jpgPath;
        }

        // Classificação por cores
        function getClassificationClass(age) {
            if (!age || age <= 0) return 'L';
            
            const ageNum = typeof age === 'string' ? parseInt(age) : age;
            
            switch(ageNum) {
                case 10: return 'ten';
                case 12: return 'twelve';
                case 14: return 'fourteen';
                case 16: return 'sixteen';
                case 18: return 'eighteen';
                default: return 'L';
            }
        }
        
        // Transformar dados do JSON
        function transformFilmData(originalFilm) {
            return {
                title: cleanField(originalFilm["Título do filme"]),
                director: cleanField(originalFilm["Direção"]),
                cast: cleanField(originalFilm["Elenco"]),
                duration: parseInt(originalFilm["Dur.(´)"]) || 0,
                genre: cleanField(originalFilm["GEN."]),
                year: parseInt(originalFilm["Ano"]) || 0,
                country: cleanField(originalFilm["País"]),
                state: cleanField(originalFilm["UF"]),
                city: cleanField(originalFilm["cidade"]),
                audiodescricao: cleanField(originalFilm["Audiodescrição"]),
                closedCaption: cleanField(originalFilm["Closed Caption"]),
                synopsis: cleanField(originalFilm["Sinopse"]),
                tema: cleanField(originalFilm["tema (Programadora Brasil)"]),
                tags: cleanField(originalFilm["tags"]),
                website: cleanField(originalFilm["website"]),
                portaCurta: cleanField(originalFilm["Porta Curta"]),
                festivais: cleanField(originalFilm["festivais"]),
                premios: cleanField(originalFilm["premios"]),
                legendasOutras: cleanField(originalFilm["legendas_outras"]),
                materialOutros: cleanField(originalFilm["material_outros"]),
                duracaoFormato: cleanField(originalFilm["duracao FORMATO"]),
                nossoAcervo: cleanField(originalFilm["Nosso Acervo"]),
                pgm: parseInt(originalFilm["PGM"]) || 0,
                filmes: parseInt(originalFilm["Filmes"]) || 0,
                dvd: cleanField(originalFilm["Nome do Programa"]),
                imageName: cleanField(originalFilm["imageName"]),
                classification: parseInt(originalFilm["Classificação Indicativa POR PGM"]) || 0
            };
        }
        
        // Carregar dados do JSON
        async function loadCatalogData() {
            try {
                const response = await fetch('catalogo.json');
                if (!response.ok) throw new Error('Erro ao carregar o arquivo');
                
                const data = await response.json();
                allFilms = data.map(transformFilmData);
                currentFilms = [...allFilms];
                
                // Extrai todos os gêneros únicos
                allGenres = [...new Set(allFilms.map(film => film.genre).filter(Boolean))].sort();
                
                renderGenreTags();
                updateResultsCount();
                renderPagination();
                renderFilms();
                
                document.getElementById('loadingMessage').style.display = 'none';
            } catch (error) {
                console.error('Erro:', error);
                document.getElementById('loadingMessage').innerHTML = `
                    <div style="color: var(--vermelho); text-align: center;">
                        <i class="fas fa-exclamation-triangle" style="font-size: 40px; margin-bottom: 15px;"></i>
                        <p style="font-weight: bold;">Erro ao carregar o catálogo</p>
                        <p>${error.message}</p>
                        <button onclick="loadCatalogData()" style="margin-top: 15px; padding: 8px 15px; background-color: var(--verde-ifmg); color: white; border: none; border-radius: 4px; cursor: pointer;">
                            <i class="fas fa-sync-alt"></i> Tentar novamente
                        </button>
                    </div>
                `;
            }
        }
        
        // Renderizar tags de gênero
        function renderGenreTags() {
            const genreTagsContainer = document.getElementById('genreTags');
            
            // Remove todas as tags exceto "Todos"
            const allTag = genreTagsContainer.querySelector('[data-genre=""]');
            genreTagsContainer.innerHTML = '';
            genreTagsContainer.appendChild(allTag);
            
            // Adiciona os gêneros
            allGenres.forEach(genre => {
                const tag = document.createElement('div');
                tag.className = 'genre-tag';
                tag.textContent = genre;
                tag.dataset.genre = genre;
                
                tag.addEventListener('click', function() {
                    selectedGenre = this.dataset.genre;
                    
                    // Ativa apenas o gênero selecionado
                    document.querySelectorAll('.genre-tag').forEach(t => {
                        t.classList.remove('active');
                    });
                    this.classList.add('active');
                    
                    filterAndRenderFilms();
                });
                
                genreTagsContainer.appendChild(tag);
            });
        }
        
        // Atualizar contador de resultados
        function updateResultsCount() {
            document.getElementById('resultsCount').textContent = currentFilms.length;
        }
        
        // Filtrar e renderizar filmes
        function filterAndRenderFilms() {
            clearTimeout(debounceTimer);
            debounceTimer = setTimeout(() => {
                const searchTerm = document.getElementById('searchInput').value.toLowerCase();
                
                // 1. Filtra por busca
                currentFilms = allFilms.filter(film => {
                    const matchesSearch = !searchTerm || (
                        film.title.toLowerCase().includes(searchTerm) ||
                        (film.director && film.director.toLowerCase().includes(searchTerm)) ||
                        (film.cast && film.cast.toLowerCase().includes(searchTerm)) ||
                        (film.synopsis && film.synopsis.toLowerCase().includes(searchTerm))
                    );
                    
                    const matchesGenre = !selectedGenre || film.genre === selectedGenre;
                    
                    return matchesSearch && matchesGenre;
                });
                
                // 2. Aplica ordenação
                if (currentSort === 'asc') {
                    currentFilms.sort((a, b) => a.title.localeCompare(b.title));
                } else if (currentSort === 'desc') {
                    currentFilms.sort((a, b) => b.title.localeCompare(a.title));
                }
                
                // 3. Atualiza a interface
                updateResultsCount();
                currentPage = 1;
                renderPagination();
                renderFilms();
            }, 300);
        }
        
        // Renderizar paginação
        function renderPagination() {
            const pagination = document.getElementById('pagination');
            pagination.innerHTML = '';
            
            const totalPages = Math.ceil(currentFilms.length / itemsPerPage);
            if (totalPages <= 1) return;
            
            // Botão Anterior
            const prevButton = document.createElement('button');
            prevButton.innerHTML = '<i class="fas fa-chevron-left"></i>';
            prevButton.disabled = currentPage === 1;
            prevButton.addEventListener('click', () => {
                if (currentPage > 1) {
                    currentPage--;
                    renderFilms();
                    window.scrollTo({top: 0, behavior: 'smooth'});
                }
            });
            pagination.appendChild(prevButton);
            
            // Páginas
            const maxVisiblePages = 5;
            let startPage = Math.max(1, currentPage - 2);
            let endPage = Math.min(totalPages, startPage + maxVisiblePages - 1);
            
            for (let i = startPage; i <= endPage; i++) {
                const pageButton = document.createElement('button');
                pageButton.textContent = i;
                if (i === currentPage) pageButton.classList.add('active');
                pageButton.addEventListener('click', () => {
                    currentPage = i;
                    renderFilms();
                    window.scrollTo({top: 0, behavior: 'smooth'});
                });
                pagination.appendChild(pageButton);
            }
            
            // Botão Próximo
            const nextButton = document.createElement('button');
            nextButton.innerHTML = '<i class="fas fa-chevron-right"></i>';
            nextButton.disabled = currentPage === totalPages;
            nextButton.addEventListener('click', () => {
                if (currentPage < totalPages) {
                    currentPage++;
                    renderFilms();
                    window.scrollTo({top: 0, behavior: 'smooth'});
                }
            });
            pagination.appendChild(nextButton);
        }
        
        // Renderizar filmes
        function renderFilms() {
            const filmGrid = document.getElementById('filmGrid');
            filmGrid.innerHTML = '';
            
            const startIndex = (currentPage - 1) * itemsPerPage;
            const endIndex = startIndex + itemsPerPage;
            const filmsToShow = currentFilms.slice(startIndex, endIndex);
            
            if (filmsToShow.length === 0) {
                filmGrid.innerHTML = `
                    <div class="no-results">
                        <i class="fas fa-film"></i>
                        <p>Nenhum filme encontrado com os critérios selecionados.</p>
                    </div>
                `;
                return;
            }
            
            filmsToShow.forEach(film => {
                const filmCard = document.createElement('div');
                filmCard.className = 'film-card';
                
                // Badge de classificação indicativa
                if (film.classification !== undefined) {
                    const classificationClass = getClassificationClass(film.classification);
                    const classificationText = film.classification <= 0 ? 'L' : film.classification;
                    
                    const classificationBadge = document.createElement('div');
                    classificationBadge.className = 'film-badge';
                    classificationBadge.innerHTML = `
                        <span class="classification ${classificationClass}">${classificationText}</span>
                    `;
                    filmCard.appendChild(classificationBadge);
                }
                
                // Poster do filme
                const posterContainer = document.createElement('div');
                posterContainer.className = 'film-poster-container';
                
                const posterImg = document.createElement('img');
                posterImg.className = 'film-poster';
                posterImg.src = getDvdCover(film);
                posterImg.alt = film.title;
                posterImg.onerror = function() {
                    this.src = 'capas/progbrasil.png';
                };
                
                posterContainer.appendChild(posterImg);
                
                // Informações do filme
                const filmInfo = document.createElement('div');
                filmInfo.className = 'film-info';
                
                const title = document.createElement('h3');
                title.className = 'film-title';
                title.textContent = film.title;
                
                const meta = document.createElement('div');
                meta.className = 'film-meta';
                
                const duration = document.createElement('span');
                duration.textContent = film.duration ? `${film.duration} min` : '';
                
                const year = document.createElement('span');
                year.textContent = film.year || '';
                
                meta.appendChild(duration);
                meta.appendChild(year);
                filmInfo.appendChild(title);
                filmInfo.appendChild(meta);
                
                filmCard.appendChild(posterContainer);
                filmCard.appendChild(filmInfo);
                
                filmCard.addEventListener('click', () => openModal(film));
                filmGrid.appendChild(filmCard);
            });
        }
        
        // Abrir modal
        function openModal(film) {
            const modal = document.getElementById('filmModal');
            const modalContent = document.getElementById('modalContent');
            
            const classification = film.classification || 0;
            const classificationClass = getClassificationClass(classification);
            const classificationText = classification <= 0 ? 'L' : classification;
            
            modalContent.innerHTML = `
                <div class="modal-poster-container">
                    <img src="${getDvdCover(film)}" alt="${film.title}" class="modal-poster" onerror="this.src='capas/progbrasil.png'">
                </div>
                <h2 class="modal-title">
                    <span class="classification ${classificationClass}">${classificationText}</span>
                    ${film.title}
                </h2>
                <div class="modal-details">
                    ${film.director ? `<p><strong><i class="fas fa-user"></i> Direção:</strong> ${film.director}</p>` : ''}
                    ${film.cast ? `<p><strong><i class="fas fa-users"></i> Elenco:</strong> ${film.cast}</p>` : ''}
                    ${film.duration ? `<p><strong><i class="fas fa-clock"></i> Duração:</strong> ${film.duration} min</p>` : ''}
                    ${film.genre ? `<p><strong><i class="fas fa-tag"></i> Gênero:</strong> ${film.genre}</p>` : ''}
                    ${film.year ? `<p><strong><i class="fas fa-calendar-alt"></i> Ano:</strong> ${film.year}</p>` : ''}
                    ${film.country ? `<p><strong><i class="fas fa-globe-americas"></i> País:</strong> ${film.country}</p>` : ''}
                    ${film.dvd ? `<p><strong><i class="fas fa-compact-disc"></i> DVD:</strong> ${film.dvd}</p>` : ''}
                </div>
                
                ${film.synopsis ? `
                <div class="modal-synopsis">
                    <h3><i class="fas fa-align-left"></i> Sinopse</h3>
                    <p>${film.synopsis}</p>
                </div>
                ` : ''}
            `;
            
            modal.style.display = 'block';
            setTimeout(() => {
                modal.classList.add('show');
            }, 10);
        }
        
        // Fechar modal
        function closeModal() {
            const modal = document.getElementById('filmModal');
            modal.classList.remove('show');
            
            setTimeout(() => {
                modal.style.display = 'none';
            }, 300);
        }
        
        // Configurar eventos
        function setupEventListeners() {
            document.getElementById('searchInput').addEventListener('input', filterAndRenderFilms);
            
            document.getElementById('sortSelect').addEventListener('change', function() {
                currentSort = this.value;
                filterAndRenderFilms();
            });
            
            document.querySelector('.close').addEventListener('click', closeModal);
            
            window.addEventListener('click', function(event) {
                if (event.target === document.getElementById('filmModal')) {
                    closeModal();
                }
            });
            
            document.querySelector('header').addEventListener('click', function() {
                window.location.href = 'https://umtremdecinemaifmg.github.io/catalogodedvds/';
            });
            
            document.querySelector('footer').addEventListener('click', function() {
                window.location.href = 'https://umtremdecinema.wixsite.com/umtremdecinema';
            });
        }
        
        // Inicialização
        window.addEventListener('DOMContentLoaded', function() {
            setupEventListeners();
            loadCatalogData();
        });
    </script>
</body>
</html>
